{% extends "index.html" %}{% block title %}DAS{% endblock %} {% block content %}
<section class="body-font">
    <div class="text-center bg-white pt-24 pb-6 md:pb-12 lg:pb-16 px-6 md:px-12 lg:px-24 h-screen flex flex-col justify-center items-center">
        <div class="w-full h-fit py-3 bg-white border-2 rounded-lg flex flex-col justify-start items-center gap-1">
            <nav class="w-full h-12 px-4 flex flex-row justify-center items-center" aria-label="Tabs">
                {% if data.active_tab == 1 %}
                <div class="h-12 flex flex-row justify-center items-center rounded-lg bg-business-color1 bg-opacity-30">
                    <a href="/upload_new" class="h-full flex items-center bg-gray-100 text-business-color1 rounded-lg px-3 py-2 text-sm font-medium" aria-current="page">Шинэ баримт бичиг</a>
                    <a href="/doc_list" class="h-full flex items-center text-business-color1 text-opacity-60 hover:text-opacity-100 rounded-lg px-3 py-2 text-sm font-medium">Баримт бичгийн жагсаалт</a>
                </div>
                {% else %}
                <div class="h-12 flex flex-row justify-center items-center rounded-lg bg-business-color1 bg-opacity-30">
                    <a href="/upload_new" class="h-full flex items-center text-business-color1 text-opacity-60 hover:text-opacity-100 rounded-lg px-3 py-2 text-sm font-medium">Шинэ баримт бичиг</a>
                    <a href="/doc_list" class="h-full flex items-center bg-gray-100 text-business-color1 rounded-lg px-3 py-2 text-sm font-medium" aria-current="page">Баримт бичгийн жагсаалт</a>
                </div>
                {% endif %}
            </nav>
            <hr class="w-full my-2" />
            {% if data.active_tab == 1 %}
            <div class="w-full flex flex-col justify-center items-center px-4">
                {% with messages = get_flashed_messages(with_categories=true) %} {% if messages %} {% for category, message in messages %} {% if category == 'error' %}
                <div class="w-full flex justify-between text-red-200 shadow-inner rounded-lg bg-opacity-90 p-3 bg-red-600">
                    <p class="self-center">{{ message }}</p>
                    <strong class="text-xl align-center cursor-pointer alert-del">&times;</strong>
                </div>
                {% elif category == 'warning' %}
                <div class="w-full flex justify-between text-orange-200 shadow-inner rounded-lg bg-opacity-90 p-3 bg-orange-600">
                    <p class="self-center">{{ message }}</p>
                    <strong class="text-xl align-center cursor-pointer alert-del">&times;</strong>
                </div>
                {% else %}
                <div class="w-full flex justify-between text-green-200 shadow-inner rounded-lg bg-opacity-90 p-3 bg-green-600">
                    <p class="self-center">{{ message }}</p>
                    <strong class="text-xl align-center cursor-pointer alert-del">&times;</strong>
                </div>
                {%endif%}{% endfor %} {% endif %} {% endwith %}
                <form class="mt-6 w-full space-y-3 md:space-y-6" method="POST" enctype="multipart/form-data">
                    <div class="w-full text-center lg:flex-auto lg:text-left">
                        <h2 class="text-2xl md:text-3xl font-bold tracking-tight text-business-color1">Баримт бичиг байршуулах хэсэг</h2>
                        <p class="mt-2 text-base md:text-lg leading-8 text-business-color1 text-opacity-50">Та доорх файл upload хэсэгт өөрийн баримт бичгийн байршуулж, шинжилгээ хийх товч дарна уу.</p>
                    </div>
                    <label for="dropzone-file" class="flex flex-col items-center justify-center w-full h-56 md:h-64 border-2 border-business-color-default border-dashed rounded-lg cursor-pointer bg-business-color1 bg-opacity-70 hover:bg-opacity-60">
                        <div class="flex flex-col items-center justify-center pt-5 pb-6">
                            <svg aria-hidden="true" class="w-10 h-10 mb-3 text-business-color1" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"></path>
                            </svg>
                            <p class="mb-2 text-sm text-business-color-default dark:text-business-color1"><span class="font-semibold text-business-color-default">Click to upload</span> or drag and drop</p>
                            <p class="mb-2 text-xs text-business-color-default dark:text-business-color1">TXT, PDF, DOC or DOCX (MAX. 20MB)</p>
                            <p class="text-base font-semibold text-business-color-default dark:text-business-color-default" id="uploaded"></p>
                        </div>
                        <input id="dropzone-file" type="file" name="upload_file" class="hidden" />
                    </label>
                    <div>
                        <button
                            id="analysis-doc"
                            type="submit"
                            onclick="start_analysis()"
                            class="flex w-36 md:w-40 justify-center rounded-md bg-business-color1 py-2 px-3 text-sm font-semibold text-white shadow-sm hover:bg-opacity-80 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600"
                        >
                            Байршуулах
                        </button>
                    </div>
                </form>
            </div>
            {% else %}
            <div class="w-full px-4 flex flex-col justify-start items-center gap-2 text-sm overflow-y-auto" style="height: 436px !important">
                {% for user_doc in data.user_doc_list %}
                <form class="w-full h-12 px-2 flex justify-between items-center bg-business-color1 rounded-lg text-business-color1 bg-opacity-10" method="POST" enctype="multipart/form-data">
                    <div class="text-left w-1/2 md:w-1/3 h-12 flex items-center">{{ user_doc.doc_name[:30]+'*.'+user_doc.doc_desc.split(';')[0] }}</div>
                    <div class="w-1/2 md:w-2/3 h-12 flex justify-end items-center gap-2">
                        <div class="px-1 border-2 text-xs rounded-md border-business-color1 text-right">{{ user_doc.doc_desc.split(';')[1] }}</div>
                        <a title="Шинжилгээ хийх" href="/doc_list/{{ user_doc.id }}" class="hover:underline" onclick="analysis_user_doc()"
                            ><image alt="search-circle" src="{{url_for('static',filename='icons/search-circle.png')}}" width="21" style="object-fit: contain"
                        /></a>
                        <button type="button" title="Устгах" class="hover:underline" value="user_doc_{{ user_doc.id }}" onclick="delete_user_doc(this.value)">
                            <image alt="trash" src="{{url_for('static',filename='icons/trash.png')}}" width="21" style="object-fit: contain" />
                        </button>
                    </div>
                </form>
                {% endfor %}
                <div id="popup-modal" tabindex="-1" class="fixed hidden top-0 left-0 right-0 bg-business-color1 bg-opacity-10 z-50 p-4 overflow-x-hidden overflow-y-auto md:inset-0 h-full items-center justify-center">
                    <div class="relative w-full max-w-md max-h-full">
                        <div class="relative bg-white rounded-lg shadow">
                            <button
                                type="button"
                                class="absolute top-3 right-2.5 text-gray-400 bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm p-1.5 ml-auto inline-flex items-center"
                                data-modal-hide="popup-modal"
                                onclick="close_popup_modal()"
                            >
                                <svg aria-hidden="true" class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
                                    <path
                                        fill-rule="evenodd"
                                        d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z"
                                        clip-rule="evenodd"
                                    ></path>
                                </svg>
                                <span class="sr-only">Close modal</span>
                            </button>
                            <div class="p-6 text-center">
                                <svg aria-hidden="true" class="mx-auto mb-4 text-gray-400 w-14 h-14 dark:text-gray-200" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                                </svg>
                                <h3 class="mb-5 text-lg font-normal text-gray-500 dark:text-gray-400">Та уг баримт бичгийг устгах даа итгэлтэй байна уу!</h3>
                                <button
                                    id="popup-modal-comfirm-btn"
                                    data-modal-hide="popup-modal"
                                    type="button"
                                    class="text-white bg-business-color1 bg-opacity-60 hover:bg-opacity-100 focus:ring-4 focus:outline-none font-medium rounded-lg text-sm inline-flex items-center px-5 py-2.5 text-center mr-2"
                                >
                                    Тийм
                                </button>
                                <button data-modal-hide="popup-modal" type="button" class="text-gray-500 bg-white hover:bg-gray-100 rounded-lg border border-gray-200 text-sm font-medium px-5 py-2.5 hover:text-gray-900" onclick="close_popup_modal()">
                                    Үгүй
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            {% endif %}
        </div>
    </div>
</section>
{% endblock %}
